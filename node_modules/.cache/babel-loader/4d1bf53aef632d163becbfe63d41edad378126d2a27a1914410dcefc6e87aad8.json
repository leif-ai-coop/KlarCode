{"ast":null,"code":"/**\r\n * Parse ICD-10 codes from a codes file\r\n * @param {string} content - Content of the ICD-10 codes file\r\n * @returns {Object} - Map of ICD-10 codes\r\n */\nexport const parseICDCodes = content => {\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\n  const codesMap = {};\n  lines.forEach(line => {\n    const parts = line.split(';');\n    if (parts.length >= 8) {\n      // Format: 3;N;X;01;A00;A00.-;A00;A00;Cholera;Cholera;;;V;V;1-002;2-001;3-003;4-002;001;9;9;9999;9999;9;J;J;J;J\n      // Or for subcodes: 4;T;X;01;A00;A00.0;A00.0;A000;Cholera durch Vibrio cholerae O:1, Biovar cholerae;Cholera;...\n      const kode = parts[6]; // A00.0 format\n      const originalNotation = parts[5]; // A00.- format für nicht-endstellige Codes\n      const beschreibung = parts[8];\n\n      // Markieren, ob es sich um einen nicht-endstelligen Code handelt\n      const isNonTerminal = originalNotation.includes('.-');\n      codesMap[kode] = {\n        kode,\n        beschreibung,\n        isNonTerminal\n      };\n    }\n  });\n  return codesMap;\n};\n\n/**\r\n * Parse ICD-10 groups from a group file\r\n * @param {string} content - Content of the ICD-10 groups file\r\n * @returns {Object} - Map of ICD-10 groups\r\n */\nexport const parseICDGroups = content => {\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\n  const groupsMap = {};\n  lines.forEach(line => {\n    const parts = line.split(';');\n    if (parts.length >= 3) {\n      // Format: A00;A09;01;Infektiöse Darmkrankheiten\n      const startCode = parts[0];\n      const endCode = parts[1];\n      const description = parts[3];\n      groupsMap[`${startCode}-${endCode}`] = {\n        start: startCode,\n        end: endCode,\n        description\n      };\n    }\n  });\n  return groupsMap;\n};\n\n/**\r\n * Parse ICD-10 chapters from a chapter file\r\n * @param {string} content - Content of the ICD-10 chapters file\r\n * @returns {Object} - Map of ICD-10 chapters\r\n */\nexport const parseICDChapters = content => {\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\n  const chaptersMap = {};\n  lines.forEach(line => {\n    const parts = line.split(';');\n    if (parts.length >= 2) {\n      // Format: 01;Bestimmte infektiöse und parasitäre Krankheiten\n      const id = parts[0];\n      const description = parts[1];\n      chaptersMap[id] = {\n        id,\n        description\n      };\n    }\n  });\n  return chaptersMap;\n};\n\n/**\r\n * Parse OPS codes from a codes file\r\n * @param {string} content - Content of the OPS codes file\r\n * @returns {Object} - Map of OPS codes\r\n */\nexport const parseOPSCodes = content => {\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\n  const codesMap = {};\n  lines.forEach(line => {\n    const parts = line.split(';');\n    if (parts.length >= 9) {\n      // Mind. 9 Teile für gültige OPS-Zeile\n      const kode = parts[6]; // z.B. 1-20a.31\n      const beschreibung = parts[8];\n      const level = parseInt(parts[0], 10); // Die erste Zahl gibt das Level an (4, 5, 6 usw.)\n\n      // Ein Code mit niedrigerem Level und/oder ohne Punkt ist wahrscheinlich ein übergeordneter Code\n      const isNonTerminal = level < 6 || !kode.includes('.');\n      codesMap[kode] = {\n        kode,\n        beschreibung,\n        isNonTerminal,\n        level\n      };\n    }\n  });\n  return codesMap;\n};\n\n/**\r\n * Parse OPS groups from a group file\r\n * @param {string} content - Content of the OPS groups file\r\n * @returns {Object} - Map of OPS groups\r\n */\nexport const parseOPSGroups = content => {\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\n  const groupsMap = {};\n  lines.forEach(line => {\n    const parts = line.split(';');\n    if (parts.length >= 4) {\n      // Format: 1;1-10;1-10;Klinische Untersuchung\n      const groupCode = parts[2];\n      const description = parts[3];\n      groupsMap[groupCode] = {\n        code: groupCode,\n        description\n      };\n    }\n  });\n  return groupsMap;\n};\n\n/**\r\n * Parse OPS chapters from a chapter file\r\n * @param {string} content - Content of the OPS chapters file\r\n * @returns {Object} - Map of OPS chapters\r\n */\nexport const parseOPSChapters = content => {\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\n  const chaptersMap = {};\n  lines.forEach(line => {\n    const parts = line.split(';');\n    if (parts.length >= 2) {\n      // Format: 1;DIAGNOSTISCHE MASSNAHMEN\n      const id = parts[0];\n      const description = parts[1];\n      chaptersMap[id] = {\n        id,\n        description\n      };\n    }\n  });\n  return chaptersMap;\n};\n\n/**\r\n * Parse OPS three-digit codes from a file\r\n * @param {string} content - Content of the OPS three-digit codes file\r\n * @returns {Object} - Map of OPS three-digit codes\r\n */\nexport const parseOPSDreisteller = content => {\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\n  const dreistellerMap = {};\n  lines.forEach(line => {\n    const parts = line.split(';');\n    if (parts.length >= 4) {\n      // Format: 1;1-10;1-10;Klinische Untersuchung\n      const code = parts[2];\n      const description = parts[3];\n      dreistellerMap[code] = {\n        code,\n        description\n      };\n    }\n  });\n  return dreistellerMap;\n};","map":{"version":3,"names":["parseICDCodes","content","lines","split","filter","line","trim","codesMap","forEach","parts","length","kode","originalNotation","beschreibung","isNonTerminal","includes","parseICDGroups","groupsMap","startCode","endCode","description","start","end","parseICDChapters","chaptersMap","id","parseOPSCodes","level","parseInt","parseOPSGroups","groupCode","code","parseOPSChapters","parseOPSDreisteller","dreistellerMap"],"sources":["C:/Code/KlarCode/src/utils/parser.js"],"sourcesContent":["/**\r\n * Parse ICD-10 codes from a codes file\r\n * @param {string} content - Content of the ICD-10 codes file\r\n * @returns {Object} - Map of ICD-10 codes\r\n */\r\nexport const parseICDCodes = (content) => {\r\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\r\n  const codesMap = {};\r\n\r\n  lines.forEach(line => {\r\n    const parts = line.split(';');\r\n    if (parts.length >= 8) {\r\n      // Format: 3;N;X;01;A00;A00.-;A00;A00;Cholera;Cholera;;;V;V;1-002;2-001;3-003;4-002;001;9;9;9999;9999;9;J;J;J;J\r\n      // Or for subcodes: 4;T;X;01;A00;A00.0;A00.0;A000;Cholera durch Vibrio cholerae O:1, Biovar cholerae;Cholera;...\r\n      const kode = parts[6]; // A00.0 format\r\n      const originalNotation = parts[5]; // A00.- format für nicht-endstellige Codes\r\n      const beschreibung = parts[8];\r\n      \r\n      // Markieren, ob es sich um einen nicht-endstelligen Code handelt\r\n      const isNonTerminal = originalNotation.includes('.-');\r\n      \r\n      codesMap[kode] = {\r\n        kode,\r\n        beschreibung,\r\n        isNonTerminal\r\n      };\r\n    }\r\n  });\r\n\r\n  return codesMap;\r\n};\r\n\r\n/**\r\n * Parse ICD-10 groups from a group file\r\n * @param {string} content - Content of the ICD-10 groups file\r\n * @returns {Object} - Map of ICD-10 groups\r\n */\r\nexport const parseICDGroups = (content) => {\r\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\r\n  const groupsMap = {};\r\n\r\n  lines.forEach(line => {\r\n    const parts = line.split(';');\r\n    if (parts.length >= 3) {\r\n      // Format: A00;A09;01;Infektiöse Darmkrankheiten\r\n      const startCode = parts[0];\r\n      const endCode = parts[1];\r\n      const description = parts[3];\r\n\r\n      groupsMap[`${startCode}-${endCode}`] = {\r\n        start: startCode,\r\n        end: endCode,\r\n        description\r\n      };\r\n    }\r\n  });\r\n\r\n  return groupsMap;\r\n};\r\n\r\n/**\r\n * Parse ICD-10 chapters from a chapter file\r\n * @param {string} content - Content of the ICD-10 chapters file\r\n * @returns {Object} - Map of ICD-10 chapters\r\n */\r\nexport const parseICDChapters = (content) => {\r\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\r\n  const chaptersMap = {};\r\n\r\n  lines.forEach(line => {\r\n    const parts = line.split(';');\r\n    if (parts.length >= 2) {\r\n      // Format: 01;Bestimmte infektiöse und parasitäre Krankheiten\r\n      const id = parts[0];\r\n      const description = parts[1];\r\n\r\n      chaptersMap[id] = {\r\n        id,\r\n        description\r\n      };\r\n    }\r\n  });\r\n\r\n  return chaptersMap;\r\n};\r\n\r\n/**\r\n * Parse OPS codes from a codes file\r\n * @param {string} content - Content of the OPS codes file\r\n * @returns {Object} - Map of OPS codes\r\n */\r\nexport const parseOPSCodes = (content) => {\r\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\r\n  const codesMap = {};\r\n\r\n  lines.forEach(line => {\r\n    const parts = line.split(';');\r\n    if (parts.length >= 9) { // Mind. 9 Teile für gültige OPS-Zeile\r\n      const kode = parts[6]; // z.B. 1-20a.31\r\n      const beschreibung = parts[8];\r\n      const level = parseInt(parts[0], 10); // Die erste Zahl gibt das Level an (4, 5, 6 usw.)\r\n      \r\n      // Ein Code mit niedrigerem Level und/oder ohne Punkt ist wahrscheinlich ein übergeordneter Code\r\n      const isNonTerminal = level < 6 || !kode.includes('.');\r\n      \r\n      codesMap[kode] = {\r\n        kode,\r\n        beschreibung,\r\n        isNonTerminal,\r\n        level\r\n      };\r\n    }\r\n  });\r\n\r\n  return codesMap;\r\n};\r\n\r\n/**\r\n * Parse OPS groups from a group file\r\n * @param {string} content - Content of the OPS groups file\r\n * @returns {Object} - Map of OPS groups\r\n */\r\nexport const parseOPSGroups = (content) => {\r\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\r\n  const groupsMap = {};\r\n\r\n  lines.forEach(line => {\r\n    const parts = line.split(';');\r\n    if (parts.length >= 4) {\r\n      // Format: 1;1-10;1-10;Klinische Untersuchung\r\n      const groupCode = parts[2];\r\n      const description = parts[3];\r\n\r\n      groupsMap[groupCode] = {\r\n        code: groupCode,\r\n        description\r\n      };\r\n    }\r\n  });\r\n\r\n  return groupsMap;\r\n};\r\n\r\n/**\r\n * Parse OPS chapters from a chapter file\r\n * @param {string} content - Content of the OPS chapters file\r\n * @returns {Object} - Map of OPS chapters\r\n */\r\nexport const parseOPSChapters = (content) => {\r\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\r\n  const chaptersMap = {};\r\n\r\n  lines.forEach(line => {\r\n    const parts = line.split(';');\r\n    if (parts.length >= 2) {\r\n      // Format: 1;DIAGNOSTISCHE MASSNAHMEN\r\n      const id = parts[0];\r\n      const description = parts[1];\r\n\r\n      chaptersMap[id] = {\r\n        id,\r\n        description\r\n      };\r\n    }\r\n  });\r\n\r\n  return chaptersMap;\r\n};\r\n\r\n/**\r\n * Parse OPS three-digit codes from a file\r\n * @param {string} content - Content of the OPS three-digit codes file\r\n * @returns {Object} - Map of OPS three-digit codes\r\n */\r\nexport const parseOPSDreisteller = (content) => {\r\n  const lines = content.split('\\n').filter(line => line.trim() !== '');\r\n  const dreistellerMap = {};\r\n\r\n  lines.forEach(line => {\r\n    const parts = line.split(';');\r\n    if (parts.length >= 4) {\r\n      // Format: 1;1-10;1-10;Klinische Untersuchung\r\n      const code = parts[2];\r\n      const description = parts[3];\r\n\r\n      dreistellerMap[code] = {\r\n        code,\r\n        description\r\n      };\r\n    }\r\n  });\r\n\r\n  return dreistellerMap;\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}